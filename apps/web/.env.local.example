# =============================================================================
# LOCAL DEVELOPMENT ENVIRONMENT VARIABLES
# =============================================================================
# This file documents all environment variables required for local development
# with Vercel Dev. Copy this file to .env.local and fill in your actual values.
#
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.local.example .env.local
# 2. Fill in your actual values (see comments for where to get them)
# 3. Never commit .env.local to Git (it's in .gitignore)
# 4. Run: vercel dev
#
# For detailed setup instructions, see: VERCEL_SETUP.md
# For troubleshooting, see: TROUBLESHOOTING.md
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (Neon PostgreSQL)
# =============================================================================
# Get these from: https://console.neon.tech
# Navigate to: Projects ‚Üí [Your Project] ‚Üí Connection Details

# Pooled connection - Use for all Vercel Dev operations
# This uses Neon's connection pooler for efficient serverless connections
# IMPORTANT: Must include "-pooler" in hostname and "?sslmode=require" at end
DATABASE_URL=postgresql://[user]:[password]@[host]-pooler.neon.tech/[database]?sslmode=require

# Direct connection - Use for migrations only (optional for local dev)
# This bypasses the pooler for operations requiring direct database access
# IMPORTANT: Remove "-pooler" from hostname compared to DATABASE_URL
DATABASE_URL_UNPOOLED=postgresql://[user]:[password]@[host].neon.tech/[database]?sslmode=require

# =============================================================================
# REDIS CONFIGURATION (Upstash Redis)
# =============================================================================
# Get these from: https://console.upstash.com
# Navigate to: Redis ‚Üí [Your Database] ‚Üí REST API tab

# Upstash Redis REST URL - Used for session management and caching
# IMPORTANT: Must use HTTPS (not redis://) for edge compatibility
REDIS_URL=https://[your-endpoint].upstash.io

# Upstash Redis REST Token - Authentication token for REST API
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
REDIS_TOKEN=[your-redis-rest-token]

# =============================================================================
# INNGEST CONFIGURATION (Workflow Engine)
# =============================================================================
# Get these from: https://app.inngest.com
# Navigate to: [Your App] ‚Üí Manage ‚Üí Keys
#
# FOR LOCAL DEVELOPMENT: You can use the Inngest Dev Server instead:
# Run: npx inngest-cli@latest dev
# This doesn't require real keys - use placeholder values below

# Event Key - Used to send events to Inngest from your API
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
INNGEST_EVENT_KEY=[your-inngest-event-key]

# Signing Key - Used to verify requests from Inngest to your API
# Format: signkey-prod-[hex-string] for production, signkey-test-[hex-string] for dev
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
INNGEST_SIGNING_KEY=signkey-test-[your-signing-key]

# =============================================================================
# BLOCKCHAIN CONFIGURATION (Blockfrost + Cardano)
# =============================================================================
# Get Blockfrost API keys from: https://blockfrost.io/dashboard

# Blockfrost Project ID - For Cardano blockchain operations
# Use 'preprod' prefix for testnet (recommended for local dev)
# Use 'mainnet' prefix for production only
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
BLOCKFROST_PROJECT_ID=preprod[your-project-id]

# Blockfrost IPFS Project ID - For uploading NFT images and metadata
# Format: ipfs[project-id]
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
BLOCKFROST_IPFS_PROJECT_ID=ipfs[your-ipfs-project-id]

# Cardano Network - Which Cardano network to use
# Use 'preprod' for testnet (recommended for local dev)
# Use 'mainnet' for production only
# IMPORTANT: Must match the network prefix in BLOCKFROST_PROJECT_ID
CARDANO_NETWORK=preprod

# NFT Policy ID - The Cardano policy ID for your NFT collection
# This is a 56-character hexadecimal string generated when creating your policy
# Generate with: npx tsx scripts/generate-policy-id.ts
# IMPORTANT: Use different policy IDs for testnet and mainnet
NFT_POLICY_ID=[your-56-char-policy-id]

# Payment Address - Cardano address that pays for transaction fees
# Format: addr_test1[...] for testnet, addr1[...] for mainnet
# IMPORTANT: This wallet must have sufficient ADA for transaction fees
# Minting: ~2-3 ADA per transaction, Forging: ~3-5 ADA per transaction
# Get testnet ADA from: https://docs.cardano.org/cardano-testnet/tools/faucet
PAYMENT_ADDRESS=addr_test1[your-payment-address]

# Wallet Seed Phrase - 24-word mnemonic for the payment wallet
# Format: 24 words separated by spaces
# üî¥ CRITICAL SECURITY WARNING:
# - This is the MOST sensitive variable - it controls access to wallet funds
# - Never commit to Git, never share with anyone, never log or display
# - Use a testnet wallet for local development (get testnet ADA from faucet)
# - Must be the same wallet that minted original NFTs for forging to work
WALLET_SEED_PHRASE=[word1 word2 word3 ... word24]

# Royalty Address - Address to receive NFT royalties when sold (CIP-27)
# Can be the same as PAYMENT_ADDRESS or a different address
# Format: addr_test1[...] for testnet, addr1[...] for mainnet
ROYALTY_ADDRESS=addr_test1[your-royalty-address]

# Royalty Rate - Percentage of sale price to receive as royalty
# Format: Decimal number (0.025 = 2.5%, 0.05 = 5%, 0.10 = 10%)
# Typical range: 2.5% - 10%
ROYALTY_RATE=0.025

# =============================================================================
# AUTHENTICATION CONFIGURATION (JWT)
# =============================================================================

# JWT Secret - Secret key for signing and verifying JWT tokens
# IMPORTANT: Must be at least 32 characters for security
# Generate with: openssl rand -base64 32
# Or: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# ‚ö†Ô∏è SENSITIVE: Use different secrets for each environment
JWT_SECRET=[your-jwt-secret-min-32-chars]

# JWT Issuer - Identifier for your application (used in JWT claims)
# This should be consistent across all environments
JWT_ISSUER=trivia-nft

# =============================================================================
# EXPO/REACT NATIVE CONFIGURATION
# =============================================================================
# These variables are used by the Expo/React Native app

# API URL - Where the app should connect to the API
# For Vercel Dev, this should be http://localhost:3000/api
EXPO_PUBLIC_API_URL=http://localhost:3000/api

# API Timeout - Request timeout in milliseconds
EXPO_PUBLIC_API_TIMEOUT=30000

# Cardano Network - Must match CARDANO_NETWORK above
EXPO_PUBLIC_CARDANO_NETWORK=preprod

# Environment - Current environment name
EXPO_PUBLIC_ENVIRONMENT=development

# Feature Flags
EXPO_PUBLIC_ENABLE_WALLET_CONNECT=true
EXPO_PUBLIC_ENABLE_GUEST_MODE=true

# Expo Router Configuration
EXPO_ROUTER_APP_ROOT=app

# =============================================================================
# TESTING AND DEVELOPMENT FLAGS
# =============================================================================

# Mint to Backend Wallet - Controls where NFTs are minted
# Set to 'true' to mint NFTs to backend wallet (useful for testing forging)
# Set to 'false' for production behavior (mints to user's wallet)
# Recommended: 'true' for local development, 'false' for production
MINT_TO_BACKEND_WALLET=true

# Node Environment - Automatically set by Vercel Dev
# You typically don't need to set this manually
# NODE_ENV=development

# =============================================================================
# OPTIONAL: AWS S3 CONFIGURATION
# =============================================================================
# Only required if using S3 for NFT asset storage (alternative to Vercel Blob)
# Most projects won't need these - leave commented out unless you're using S3

# S3 Bucket Name - Bucket where NFT assets are stored
# S3_BUCKET=[your-bucket-name]

# S3 Region - AWS region where your bucket is located
# S3_REGION=us-east-1

# AWS Access Key ID - IAM user credentials with S3 access
# ‚ö†Ô∏è SENSITIVE: Keep this secret, never commit to Git
# AWS_ACCESS_KEY_ID=[your-access-key-id]

# AWS Secret Access Key - IAM user secret
# üî¥ CRITICAL: Keep this secret, never commit to Git
# AWS_SECRET_ACCESS_KEY=[your-secret-access-key]

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================
# Before running vercel dev, verify:
# [ ] All required variables are filled in (no [placeholders] remain)
# [ ] DATABASE_URL includes "-pooler" and "?sslmode=require"
# [ ] REDIS_URL uses HTTPS (not redis://)
# [ ] CARDANO_NETWORK matches BLOCKFROST_PROJECT_ID prefix
# [ ] PAYMENT_ADDRESS matches CARDANO_NETWORK (addr_test1 for preprod)
# [ ] JWT_SECRET is at least 32 characters
# [ ] WALLET_SEED_PHRASE is 24 words (for testnet wallet)
# [ ] .env.local is in .gitignore (never commit secrets!)
#
# Run verification script: npx tsx scripts/verify-env-vars.ts
# Test database connection: npx tsx scripts/test-database-connectivity.ts
#
# =============================================================================
# QUICK START EXAMPLE VALUES
# =============================================================================
# Here's what a filled-in .env.local might look like (with fake values):
#
# DATABASE_URL=postgresql://user:pass@ep-cool-name-123-pooler.neon.tech/db?sslmode=require
# REDIS_URL=https://happy-cat-12345.upstash.io
# REDIS_TOKEN=AXlzASQgNzk4YjQ5YTktMGVhZC00NzE5LWI4ZjYtOTM0ZDQ5ZjI1YmU0abc123
# INNGEST_EVENT_KEY=DhWVJWVkE-OFHZVAcenzQ5z8PQW64it3cv5FXAk4SmrwNE7cQy2z
# INNGEST_SIGNING_KEY=signkey-test-166eac79aab9e423896aae0727d89d1c4e63ed57
# BLOCKFROST_PROJECT_ID=preprodWAuGSqaryUNPRLQw5NmFbL9YgTduoG5y
# BLOCKFROST_IPFS_PROJECT_ID=ipfse4BtZvIZjMY0Dxsfv9kbiFSmsmuxNBVx
# CARDANO_NETWORK=preprod
# NFT_POLICY_ID=7222e4868deb9c45600654d678bec7be9c21cf8cc79d3f26ea7c49c1
# PAYMENT_ADDRESS=addr_test1qqj8u4jl342h835x0mrdefm3fra0cd5ds9aqdcds7k3jnrlju66nvk
# WALLET_SEED_PHRASE=word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12 word13 word14 word15 word16 word17 word18 word19 word20 word21 word22 word23 word24
# ROYALTY_ADDRESS=addr_test1qqj8u4jl342h835x0mrdefm3fra0cd5ds9aqdcds7k3jnrlju66nvk
# ROYALTY_RATE=0.025
# JWT_SECRET=Xk7mp9Qw2Rt5Yh8Nj3Lp6Vb4Zx1Cd0Fg9Hk2Mn5Pq8Rs
# JWT_ISSUER=trivia-nft
# EXPO_PUBLIC_API_URL=http://localhost:3000/api
# EXPO_PUBLIC_CARDANO_NETWORK=preprod
# MINT_TO_BACKEND_WALLET=true
#
# =============================================================================
# ADDITIONAL RESOURCES
# =============================================================================
# - Vercel Setup Guide: VERCEL_SETUP.md
# - Local Development Guide: LOCAL_DEV_GUIDE.md
# - Troubleshooting: TROUBLESHOOTING.md
# - Environment Variables Reference: ENVIRONMENT_VARIABLES.md
# - Neon Database: https://console.neon.tech
# - Upstash Redis: https://console.upstash.com
# - Inngest: https://app.inngest.com
# - Blockfrost: https://blockfrost.io/dashboard
# - Cardano Testnet Faucet: https://docs.cardano.org/cardano-testnet/tools/faucet
# =============================================================================
